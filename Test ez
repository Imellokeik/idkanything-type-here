local s=Instance.new("ScreenGui",game.CoreGui)
s.Name="InjuredCratePanel"
s.ResetOnSpawn=false
s.IgnoreGuiInset=true

local main=Instance.new("Frame",s)
main.Size=UDim2.new(0,240,0,190)
main.Position=UDim2.new(0,30,0,150)
main.BackgroundColor3=Color3.fromRGB(20,20,20)
main.BorderSizePixel=0
main.Active=true

Instance.new("UICorner",main).CornerRadius=UDim.new(0,6)

local outline=Instance.new("UIStroke",main)
outline.Thickness=2
outline.ApplyStrokeMode=Enum.ApplyStrokeMode.Border
outline.LineJoinMode=Enum.LineJoinMode.Round

task.spawn(function()
local h=0
while true do
h=(h+1)%360
outline.Color=Color3.fromHSV(h/360,1,1)
task.wait(0.03)
end
end)

local topbar=Instance.new("TextButton",main)
topbar.Size=UDim2.new(1,0,0,30)
topbar.BackgroundColor3=Color3.fromRGB(30,30,30)
topbar.Text="Egg Event Farmer"
topbar.Font=Enum.Font.GothamBold
topbar.TextColor3=Color3.new(1,1,1)
topbar.TextSize=14
topbar.BorderSizePixel=0
topbar.AutoButtonColor=false
topbar.Active=true

Instance.new("UICorner",topbar).CornerRadius=UDim.new(0,6)

local dragging=false
local offset
local inputConnection

topbar.InputBegan:Connect(function(i)
if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then
dragging=true
offset=Vector2.new(i.Position.X,i.Position.Y)-Vector2.new(main.Position.X.Offset,main.Position.Y.Offset)
if inputConnection then inputConnection:Disconnect() end
inputConnection=game:GetService("UserInputService").InputChanged:Connect(function(m)
if dragging and (m.UserInputType==Enum.UserInputType.MouseMovement or m.UserInputType==Enum.UserInputType.Touch) then
local p=Vector2.new(m.Position.X,m.Position.Y)-offset
main.Position=UDim2.new(0,p.X,0,p.Y)
end
end)
end
end)

topbar.InputEnded:Connect(function(i)
if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then
dragging=false
if inputConnection then inputConnection:Disconnect() end
end
end)

local eggList={"Basic Egg","Rare Egg","Legendary Egg"}
local index=3

local selector=Instance.new("TextButton",main)
selector.Size=UDim2.new(0.9,0,0,30)
selector.Position=UDim2.new(0.05,0,0,40)
selector.BackgroundColor3=Color3.fromRGB(60,60,60)
selector.Text="Select Egg: "..eggList[index]
selector.Font=Enum.Font.GothamSemibold
selector.TextColor3=Color3.new(1,1,1)
selector.TextSize=13
selector.BorderSizePixel=0
selector.AutoButtonColor=false

Instance.new("UICorner",selector).CornerRadius=UDim.new(0,5)

selector.MouseButton1Click:Connect(function()
index=index%#eggList+1
selector.Text="Select Egg: "..eggList[index]
end)

local toggle=Instance.new("TextButton",main)
toggle.Size=UDim2.new(0.9,0,0,30)
toggle.Position=UDim2.new(0.05,0,0,80)
toggle.BackgroundColor3=Color3.fromRGB(255,0,0)
toggle.Text="Egg Event Farm: Off"
toggle.Font=Enum.Font.GothamSemibold
toggle.TextColor3=Color3.new(1,1,1)
toggle.TextSize=13
toggle.BorderSizePixel=0

Instance.new("UICorner",toggle).CornerRadius=UDim.new(0,5)

local on=false

toggle.MouseButton1Click:Connect(function()
on=not on
toggle.BackgroundColor3=on and Color3.fromRGB(0,255,0) or Color3.fromRGB(255,0,0)
toggle.Text=on and "Egg Event Farm: On" or "Egg Event Farm: Off"
end)

local note=Instance.new("TextLabel",main)
note.Size=UDim2.new(0.9,0,0,30)
note.Position=UDim2.new(0.05,0,0,120)
note.BackgroundTransparency=1
note.Text="Note: Units from auto hatching are still granted. Egg animation was disabled for convenience."
note.TextColor3=Color3.fromRGB(255,255,255)
note.TextWrapped=true
note.TextScaled=true
note.Font=Enum.Font.Gotham

local close=Instance.new("TextButton",main)
close.Size=UDim2.new(0,20,0,20)
close.Position=UDim2.new(1,-25,0,5)
close.BackgroundTransparency=0.8
close.BackgroundColor3=Color3.fromRGB(255,0,0)
close.Text="X"
close.TextColor3=Color3.fromRGB(255,255,255)
close.Font=Enum.Font.GothamBold
close.TextSize=14
close.BorderSizePixel=0
close.AutoButtonColor=true

Instance.new("UICorner",close).CornerRadius=UDim.new(0,3)

local reopen=Instance.new("TextButton",s)
reopen.Size=UDim2.new(0,60,0,25)
reopen.Position=UDim2.new(0,10,0,10)
reopen.Text="Open"
reopen.BackgroundColor3=Color3.fromRGB(50,50,50)
reopen.TextColor3=Color3.new(1,1,1)
reopen.Font=Enum.Font.GothamSemibold
reopen.TextSize=13
reopen.Visible=false

Instance.new("UICorner",reopen).CornerRadius=UDim.new(0,4)

close.MouseButton1Click:Connect(function()
main.Visible=false
reopen.Visible=true
end)

reopen.MouseButton1Click:Connect(function()
main.Visible=true
reopen.Visible=false
end)

local rs=game:GetService("ReplicatedStorage")
local pg=game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

for _,c in pairs(getconnections(rs.Events.OpenEventEgg.OnClientEvent)) do c:Disable() end

task.spawn(function()
while task.wait(0.2) do
for _,v in pairs(pg:GetChildren()) do
if v:IsA("ScreenGui") and v.Name:lower():match("egg") then
v.Enabled=false
end
end
end
end)

task.spawn(function()
while task.wait() do
if on then
pcall(function()
rs.Events.OpenEventEgg:FireServer(eggList[index],1)
end)
end
end
end)
